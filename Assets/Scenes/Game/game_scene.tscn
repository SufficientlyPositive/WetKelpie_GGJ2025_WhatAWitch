[gd_scene load_steps=38 format=3 uid="uid://c5fhm7hriksjo"]

[ext_resource type="Script" path="res://Assets/Scenes/Game/game_main.gd" id="1_2dtmn"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/game_scene.gd" id="1_o8wbe"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/game_ui.gd" id="3_m2qu8"]
[ext_resource type="Texture2D" uid="uid://c0gx8waw6vpf7" path="res://Assets/Images/Background Scroll.png" id="3_muc21"]
[ext_resource type="Texture2D" uid="uid://dficnt53eks1u" path="res://Assets/Images/Background Columns.png" id="4_5efoe"]
[ext_resource type="Theme" uid="uid://cny8msiucnohq" path="res://Assets/UI/Themes/menu_button_theme.tres" id="4_w2t0c"]
[ext_resource type="Texture2D" uid="uid://c3wvr7u24rsjm" path="res://Assets/Images/Bckground centre shadows.png" id="5_3jo83"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/recipe_manager.gd" id="5_tkifj"]
[ext_resource type="Texture2D" uid="uid://do4kbiwqlode7" path="res://Assets/Images/Cauldron List.png" id="6_nj5fe"]
[ext_resource type="Texture2D" uid="uid://clndotwhc88xb" path="res://Assets/Images/Recipe List.png" id="7_jbq0w"]
[ext_resource type="FontFile" uid="uid://cwltetxo7ybuy" path="res://Assets/Fonts/grandstander/Grandstander-Bold.ttf" id="7_rud6v"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/player_character.gd" id="8_euk73"]
[ext_resource type="PackedScene" uid="uid://chrrjtg6y86xk" path="res://Assets/Scenes/Enemy/enemy_control.tscn" id="9_37kig"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/everything_killbox.gd" id="13_4tnrd"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/ingredient_spawner.gd" id="14_xe6ob"]
[ext_resource type="PackedScene" uid="uid://bu3dpmmojpwr6" path="res://Assets/Scenes/Bubble/bubble_control.tscn" id="15_44rxp"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/spawning_area.gd" id="16_1au7j"]
[ext_resource type="Texture2D" uid="uid://drvbaoed44owq" path="res://Assets/Images/Platform.png" id="16_k7shc"]
[ext_resource type="Texture2D" uid="uid://cmgeugs6upte6" path="res://Assets/Images/Witch Slimeblooie.png" id="18_7bvry"]
[ext_resource type="Texture2D" uid="uid://b7ptfg8dd55w6" path="res://Assets/Images/Witch Flying.png" id="18_dn552"]
[ext_resource type="Texture2D" uid="uid://bku6mxyv0wa3u" path="res://Assets/Images/ShieldCat.png" id="19_8001e"]
[ext_resource type="Texture2D" uid="uid://dxqoyk4scnh8f" path="res://Assets/Images/Witch Kablooie.png" id="19_osicn"]
[ext_resource type="Texture2D" uid="uid://bat1saymbcf24" path="res://Assets/Images/cauldron.png" id="20_ya0mu"]
[ext_resource type="Texture2D" uid="uid://efuwl0pkk8h4" path="res://Assets/Images/ShieldCat Used.png" id="21_50ed0"]
[ext_resource type="Texture2D" uid="uid://b2xm24udpqdgr" path="res://Assets/Images/Cauldron Det 1.png" id="21_64k8u"]
[ext_resource type="Texture2D" uid="uid://dqrolxdmt4b0m" path="res://Assets/Images/Cauldron Det 2.png" id="22_mscwv"]
[ext_resource type="Texture2D" uid="uid://b16ej5f053lfv" path="res://Assets/Images/Cauldron Det 3.png" id="23_5vt8b"]
[ext_resource type="Script" path="res://Assets/Scenes/Game/cauldron_explosion.gd" id="24_26185"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ia71d"]
bg_color = Color(0.298039, 0.0509804, 0.054902, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_e542f"]
size = Vector2(984.521, 41)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o5giy"]
size = Vector2(1183.85, 103)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hbfva"]
size = Vector2(156.997, 27.5)

[sub_resource type="SpriteFrames" id="SpriteFrames_papvs"]
animations = [{
"frames": [{
"duration": 5.0,
"texture": ExtResource("18_7bvry")
}, {
"duration": 3.0,
"texture": ExtResource("19_osicn")
}],
"loop": false,
"name": &"cauldron_explodes",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("18_dn552")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_4hrys"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("21_50ed0")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("19_8001e")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_aalth"]
size = Vector2(88.3025, 40.7371)

[sub_resource type="SpriteFrames" id="SpriteFrames_5neq7"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("20_ya0mu")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_5vnle"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("21_64k8u")
}, {
"duration": 1.0,
"texture": ExtResource("22_mscwv")
}, {
"duration": 2.0,
"texture": ExtResource("23_5vt8b")
}],
"loop": false,
"name": &"explosion",
"speed": 5.0
}]

[node name="GameMain" type="Node" node_paths=PackedStringArray("game_scene", "game_canvas")]
script = ExtResource("1_2dtmn")
game_scene = NodePath("GameScene")
game_canvas = NodePath("GameCanvas")

[node name="GameCanvas" type="Node" parent="." node_paths=PackedStringArray("pause_menu")]
script = ExtResource("3_m2qu8")
pause_menu = NodePath("PauseMenu")

[node name="BackBackground" type="TextureRect" parent="GameCanvas"]
z_index = -1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 313.0
offset_right = -408.0
offset_bottom = -60.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("3_muc21")
expand_mode = 1

[node name="Background" type="TextureRect" parent="GameCanvas"]
z_index = -1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -570.0
offset_top = -540.0
offset_right = 570.0
offset_bottom = 540.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("5_3jo83")

[node name="LeftColumn" type="TextureRect" parent="GameCanvas"]
z_index = -1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -540.0
offset_right = 390.0
offset_bottom = 540.0
grow_vertical = 2
texture = ExtResource("4_5efoe")

[node name="TextureRect" type="TextureRect" parent="GameCanvas/LeftColumn"]
layout_mode = 0
offset_left = -24.0
offset_top = 116.0
offset_right = 372.0
offset_bottom = 1080.0
texture = ExtResource("6_nj5fe")
expand_mode = 1

[node name="RightColumn" type="TextureRect" parent="GameCanvas"]
z_index = -1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -390.0
offset_top = -540.0
offset_bottom = 540.0
grow_horizontal = 0
grow_vertical = 2
texture = ExtResource("4_5efoe")

[node name="TextureRect" type="TextureRect" parent="GameCanvas/RightColumn"]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -391.0
offset_top = -427.0
offset_right = 5.0
offset_bottom = 540.0
grow_horizontal = 0
grow_vertical = 2
texture = ExtResource("7_jbq0w")
expand_mode = 1

[node name="CauldronUI" type="Control" parent="GameCanvas"]
unique_name_in_owner = true
layout_mode = 3
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -540.0
offset_right = 386.0
offset_bottom = 540.0
grow_vertical = 2

[node name="Contents" type="VBoxContainer" parent="GameCanvas/CauldronUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -80.0
offset_top = -206.0
offset_right = 91.0
offset_bottom = 362.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 10

[node name="I0" type="TextureRect" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_horizontal = 4
expand_mode = 2

[node name="Separator1" type="Panel" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(0, 5)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_ia71d")

[node name="I1" type="TextureRect" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_horizontal = 4
expand_mode = 2

[node name="Separator2" type="Panel" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(0, 5)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_ia71d")

[node name="I2" type="TextureRect" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_horizontal = 4
expand_mode = 2

[node name="Separator3" type="Control" parent="GameCanvas/CauldronUI/Contents"]
custom_minimum_size = Vector2(0, 70)
layout_mode = 2

[node name="Label" type="Label" parent="GameCanvas/CauldronUI/Contents"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("7_rud6v")
theme_override_font_sizes/font_size = 32
text = "SCORE"
horizontal_alignment = 1

[node name="Score" type="Label" parent="GameCanvas/CauldronUI/Contents"]
layout_mode = 2
theme_override_fonts/font = ExtResource("7_rud6v")
theme_override_font_sizes/font_size = 72
text = "0"
horizontal_alignment = 1

[node name="Recipes" type="Control" parent="GameCanvas"]
unique_name_in_owner = true
layout_mode = 3
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -390.0
offset_top = -400.0
offset_bottom = 400.0
grow_horizontal = 0
grow_vertical = 2
script = ExtResource("5_tkifj")

[node name="MarginContainer" type="MarginContainer" parent="GameCanvas/Recipes"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 198.0
offset_bottom = -71.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 80
theme_override_constants/margin_right = 80

[node name="RecipeCards" type="VBoxContainer" parent="GameCanvas/Recipes/MarginContainer"]
layout_mode = 2

[node name="RecipeCard" type="HBoxContainer" parent="GameCanvas/Recipes/MarginContainer/RecipeCards"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2

[node name="Val" type="Label" parent="GameCanvas/Recipes/MarginContainer/RecipeCards/RecipeCard"]
custom_minimum_size = Vector2(142, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 1
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 32
text = "ANY x3"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Val2" type="Label" parent="GameCanvas/Recipes/MarginContainer/RecipeCards/RecipeCard"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 1
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 32
text = "100"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CurrentRecipe" type="VBoxContainer" parent="GameCanvas/Recipes/MarginContainer"]
layout_mode = 2
alignment = 2

[node name="Label" type="Label" parent="GameCanvas/Recipes/MarginContainer/CurrentRecipe"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("7_rud6v")
theme_override_font_sizes/font_size = 30
text = "BONUS POINTS!"
horizontal_alignment = 1

[node name="PauseMenu" type="ColorRect" parent="GameCanvas"]
visible = false
z_index = 100
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.392157)

[node name="PauseMenuButtons" type="VBoxContainer" parent="GameCanvas/PauseMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -250.0
offset_top = -114.0
offset_right = 250.0
offset_bottom = 114.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 20

[node name="ContinueButton" type="Button" parent="GameCanvas/PauseMenu/PauseMenuButtons"]
custom_minimum_size = Vector2(0, 80)
layout_mode = 2
theme = ExtResource("4_w2t0c")

[node name="Label" type="Label" parent="GameCanvas/PauseMenu/PauseMenuButtons/ContinueButton"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "CONTINUE"
horizontal_alignment = 1
vertical_alignment = 2

[node name="QuitToMenuButton" type="Button" parent="GameCanvas/PauseMenu/PauseMenuButtons"]
custom_minimum_size = Vector2(0, 80)
layout_mode = 2
theme = ExtResource("4_w2t0c")

[node name="Label" type="Label" parent="GameCanvas/PauseMenu/PauseMenuButtons/QuitToMenuButton"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "QUIT TO MENU"
horizontal_alignment = 1
vertical_alignment = 2

[node name="GameScene" type="Node2D" parent="." node_paths=PackedStringArray("player_character", "ingredient_spawner", "enemy_spawner")]
process_mode = 1
scale = Vector2(0.987282, 1)
script = ExtResource("1_o8wbe")
player_character = NodePath("PlayerCharacter")
ingredient_spawner = NodePath("IngredientSpawner")
enemy_spawner = NodePath("EnemySpawner")

[node name="SpawningArea" type="Area2D" parent="GameScene" node_paths=PackedStringArray("rectangle")]
collision_layer = 0
collision_mask = 0
script = ExtResource("16_1au7j")
rectangle = NodePath("Area")

[node name="Area" type="CollisionShape2D" parent="GameScene/SpawningArea"]
position = Vector2(954.135, -30.5)
shape = SubResource("RectangleShape2D_e542f")

[node name="EnemySpawner" parent="GameScene" node_paths=PackedStringArray("spawning_area") instance=ExtResource("9_37kig")]
spawning_area = NodePath("../SpawningArea")

[node name="IngredientSpawner" type="Node2D" parent="GameScene" node_paths=PackedStringArray("spawning_area")]
z_index = 2
script = ExtResource("14_xe6ob")
spawning_area = NodePath("../SpawningArea")

[node name="BubbleControl" parent="GameScene" instance=ExtResource("15_44rxp")]
z_index = 4

[node name="ForegroundWalkable" type="StaticBody2D" parent="GameScene"]
position = Vector2(960, 540)

[node name="PlankSprite" type="Sprite2D" parent="GameScene/ForegroundWalkable"]
position = Vector2(14.8801, 426)
scale = Vector2(0.976, 0.976)
texture = ExtResource("16_k7shc")

[node name="ForegroundCollision" type="CollisionShape2D" parent="GameScene/ForegroundWalkable"]
position = Vector2(8.66748, 473.5)
shape = SubResource("RectangleShape2D_o5giy")

[node name="PlayerCharacter" type="CharacterBody2D" parent="GameScene"]
unique_name_in_owner = true
z_index = 3
position = Vector2(960, 886)
scale = Vector2(0.6, 0.6)
collision_layer = 0
script = ExtResource("8_euk73")

[node name="PlayerPhysicsCollision" type="CollisionShape2D" parent="GameScene/PlayerCharacter"]
position = Vector2(-3.33313, 78.75)
shape = SubResource("RectangleShape2D_hbfva")

[node name="PlayerHurtBox" type="Area2D" parent="GameScene/PlayerCharacter"]
collision_layer = 2
collision_mask = 16

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GameScene/PlayerCharacter/PlayerHurtBox"]
polygon = PackedVector2Array(-11.13, -26.25, 1.53101, -25, -7.33179, -22.5, -13.2244, -15.4703, -14.9283, -11.25, -19.9928, -10, -21.2589, -3.75, -46.5809, 10, -59.2419, 8.75, -68.1046, 15, -70.6368, 21.25, -70.6368, 25, -71.903, 27.5, -71.903, 31.25, -69.3707, 35, -64.3063, 36.25, -59.2419, 35, -56.7097, 40, -52.9114, 42.5, -55.4436, 43.75, -65.5724, 45, -68.1046, 50, -68.1046, 66.25, -46.5809, 71.25, -11.13, 71.25, 21.7886, 57.5, 30.7256, 61.6082, 61.0378, 57.5, 73.6989, 51.25, 90.1581, 50, 101.553, 68.75, 110.416, 68.75, 114.223, 57.8155, 115.48, 37.5, 124.343, 32.5, 124.343, 28.75, 107.884, 22.5, 96.4886, 30, 88.8921, 32.5, 90.1581, 25, 78.7632, 6.25, 80.0293, 1.25, 77.4971, -6.25, 76.231, -17.5, 68.6344, -25, 78.7632, -31.25, 85.0938, -42.5, 88.8921, -60, 86.3599, -71.25, 101.553, -78.75, 114.214, -88.75, 114.214, -96.25, 95.2225, -106.25, 67.3683, -105, 30.6514, -140, 5.32935, -136.25, -11.13, -117.5, -28.8555, -116.25, -52.9114, -92.5, -51.6453, -90, -25.0571, -97.5, -13.6622, -86.25, -36.452, -73.75, -44.0487, -63.75, -42.7826, -57.5, -35.186, -52.5, -26.3232, -53.75, -26.3232, -43.75, -21.2589, -33.75)

[node name="PlayerSprite" type="AnimatedSprite2D" parent="GameScene/PlayerCharacter"]
scale = Vector2(0.6, 0.6)
sprite_frames = SubResource("SpriteFrames_papvs")
animation = &"cauldron_explodes"
autoplay = "default"

[node name="ShieldNode" type="Node2D" parent="GameScene/PlayerCharacter"]

[node name="ShieldSprite" type="AnimatedSprite2D" parent="GameScene/PlayerCharacter/ShieldNode"]
position = Vector2(104, 12.5)
scale = Vector2(0.6, 0.6)
sprite_frames = SubResource("SpriteFrames_4hrys")
autoplay = "default"

[node name="Cauldron" type="Area2D" parent="GameScene/PlayerCharacter"]
z_index = -1
position = Vector2(19.39, 0)
scale = Vector2(1.3, 1.3)
collision_layer = 4
collision_mask = 56

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameScene/PlayerCharacter/Cauldron"]
position = Vector2(-80.8705, -40.8813)
scale = Vector2(1, 1)
shape = SubResource("RectangleShape2D_aalth")

[node name="CauldronSprite" type="AnimatedSprite2D" parent="GameScene/PlayerCharacter/Cauldron"]
position = Vector2(-74.429, -13.7646)
rotation = -0.103554
scale = Vector2(0.25, 0.23)
sprite_frames = SubResource("SpriteFrames_5neq7")
autoplay = "default"

[node name="CauldronExplosion" type="AnimatedSprite2D" parent="GameScene/PlayerCharacter/Cauldron"]
visible = false
position = Vector2(-82.0317, -86.25)
rotation = -0.102974
scale = Vector2(0.25, 0.25)
sprite_frames = SubResource("SpriteFrames_5vnle")
animation = &"explosion"
script = ExtResource("24_26185")

[node name="PlayerAudio" type="AudioStreamPlayer2D" parent="GameScene/PlayerCharacter"]

[node name="EverythingKillbox" type="Area2D" parent="GameScene"]
script = ExtResource("13_4tnrd")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GameScene/EverythingKillbox"]
polygon = PackedVector2Array(-685.721, 1740, 2687.18, 1740, 2720.6, -567, -695.85, -567, -261.324, -261, 2214.16, -277, 2190.86, 1266, -227.898, 1274, -261.324, -261, -695.85, -572)

[connection signal="pressed" from="GameCanvas/PauseMenu/PauseMenuButtons/ContinueButton" to="." method="toggle_pause"]
[connection signal="pressed" from="GameCanvas/PauseMenu/PauseMenuButtons/QuitToMenuButton" to="." method="quit_to_main_menu"]
[connection signal="change_points_by" from="GameScene/PlayerCharacter" to="." method="change_points"]
[connection signal="animation_finished" from="GameScene/PlayerCharacter/PlayerSprite" to="GameScene/PlayerCharacter" method="_on_player_sprite_animation_finished"]
[connection signal="area_entered" from="GameScene/PlayerCharacter/Cauldron" to="GameScene/PlayerCharacter" method="on_cauldron_body_entered"]
[connection signal="body_entered" from="GameScene/PlayerCharacter/Cauldron" to="GameScene/PlayerCharacter" method="on_cauldron_body_entered"]
[connection signal="animation_finished" from="GameScene/PlayerCharacter/Cauldron/CauldronExplosion" to="GameScene/PlayerCharacter/Cauldron/CauldronExplosion" method="on_animation_finished"]
[connection signal="body_entered" from="GameScene/EverythingKillbox" to="GameScene/EverythingKillbox" method="_on_killbox_entered"]
